"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.computeRefKey = computeRefKey;
exports.parsePositionsAndRewards = parsePositionsAndRewards;
exports.sleep = sleep;
exports.timestampToDate = timestampToDate;
exports.timeToMaturity = timeToMaturity;
const ethers_1 = require("ethers");
function computeRefKey(ref) {
    return (0, ethers_1.keccak256)((0, ethers_1.toUtf8Bytes)(ref));
}
function parsePositionsAndRewards(input) {
    return {
        positions: input[0].map(items => {
            return {
                period: Number(items[0].toString()),
                start: Number(items[1].toString()),
                maturity: Number(items[2].toString()),
                locked: Number(items[3].toString()),
                claimed: Number(items[4].toString()),
            };
        }),
        staked: Number(input[1].toString()),
        totalRewards: Number(input[2].toString()),
        claimed: Number(input[3].toString()),
    };
}
function sleep(ms) {
    return new Promise((resolve) => setTimeout(resolve, ms));
}
function timestampToDate(ts) {
    return (new Date(ts * 1000)).toISOString();
}
function timeToMaturity(ts) {
    const _now = Math.floor(Date.now() / 1000);
    const left = ts - _now;
    return {
        days: Math.floor(left / (24 * 3600)),
        hours: Math.floor((left % (24 * 3600)) / 3600),
        minutes: Math.floor((left % 3600) / 60),
        seconds: left % 60
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvdXRpbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFJQSxzQ0FFQztBQUVELDREQW9CQztBQUVELHNCQUVDO0FBRUQsMENBRUM7QUFFRCx3Q0FVQztBQWhERCxtQ0FBZ0Q7QUFJaEQsU0FBZ0IsYUFBYSxDQUFDLEdBQVc7SUFDdkMsT0FBTyxJQUFBLGtCQUFTLEVBQUMsSUFBQSxvQkFBVyxFQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDckMsQ0FBQztBQUVELFNBQWdCLHdCQUF3QixDQUFDLEtBS3hDO0lBQ0MsT0FBTztRQUNMLFNBQVMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFO1lBQzlCLE9BQU87Z0JBQ0wsTUFBTSxFQUFFLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUM7Z0JBQ25DLEtBQUssRUFBRSxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDO2dCQUNsQyxRQUFRLEVBQUUsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztnQkFDckMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUM7Z0JBQ25DLE9BQU8sRUFBRSxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDO2FBQ3hCLENBQUE7UUFDaEIsQ0FBQyxDQUFDO1FBQ0YsTUFBTSxFQUFFLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDbkMsWUFBWSxFQUFFLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDekMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUM7S0FDckMsQ0FBQTtBQUNILENBQUM7QUFFRCxTQUFnQixLQUFLLENBQUMsRUFBVTtJQUM5QixPQUFPLElBQUksT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDM0QsQ0FBQztBQUVELFNBQWdCLGVBQWUsQ0FBQyxFQUFVO0lBQ3hDLE9BQU8sQ0FBQyxJQUFJLElBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtBQUM1QyxDQUFDO0FBRUQsU0FBZ0IsY0FBYyxDQUFDLEVBQVU7SUFDdkMsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUM7SUFDM0MsTUFBTSxJQUFJLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQztJQUV2QixPQUFPO1FBQ0wsSUFBSSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDO1FBQ3BDLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxHQUFHLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDO1FBQzlDLE9BQU8sRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUN2QyxPQUFPLEVBQUUsSUFBSSxHQUFHLEVBQUU7S0FDbkIsQ0FBQTtBQUNILENBQUMifQ==